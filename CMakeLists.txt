CMAKE_MINIMUM_REQUIRED(VERSION 3.9)

PROJECT(ClosestPoint)

FIND_PACKAGE(Boost COMPONENTS program_options REQUIRED)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})

SET(CMAKE_CXX_STANDARD 17)

ADD_EXECUTABLE(closestPoint
    src/main.cpp
    src/ProgramOptions.cpp
)

TARGET_LINK_LIBRARIES(closestPoint
    ${Boost_LIBRARIES}
    )

IF(UNIX)
  ADD_CUSTOM_TARGET(shapeSymLink ALL
    COMMAND ${CMAKE_COMMAND} -E create_symlink ${CMAKE_SOURCE_DIR}/shapes ${CMAKE_BINARY_DIR}/shapes)
ENDIF(UNIX)

IF(WIN32)
  FILE(COPY ${CMAKE_SOURCE_DIR}/shapes DESTINATION ${CMAKE_BINARY_DIR})
ENDIF(WIN32)

ENABLE_TESTING()
ADD_SUBDIRECTORY(tests)
